quarkus.http.port=8083
quarkus.application.name=account-service

# Datasource - db-accounts (docker-compose: service db-accounts, DB account_service_db, root/root, port 3306)
# Local (app on machine): localhost:3306
# App on Docker network: use "docker" profile or quarkus.datasource.jdbc.url=jdbc:mysql://db-accounts:3306/account_service_db
quarkus.datasource.db-kind=mysql
quarkus.datasource.username=root
quarkus.datasource.password=root
quarkus.datasource.jdbc.url=jdbc:mysql://localhost:3306/account_service_db
quarkus.datasource.jdbc.max-size=16

# Flyway - migrations in src/main/resources/db/migration
quarkus.flyway.migrate-at-start=true

# Hibernate - schema controlled by Flyway (do not generate/alter)
quarkus.hibernate-orm.database.generation=update
quarkus.hibernate-orm.log.sql=false

# gRPC: code generated from src/main/proto/account.proto

# gRPC server (BFF calls this endpoint)
quarkus.grpc.server.port=9001

# gRPC client - card-service (create physical card when creating account)
quarkus.grpc.clients.card-service.host=localhost
quarkus.grpc.clients.card-service.port=9002

# Kafka - asynchronous sending (create physical card, cancel cards). Local: localhost:9092; Docker: kafka:29092 (docker profile)
kafka.bootstrap.servers=localhost:9092
mp.messaging.outgoing.create-physical-card.connector=smallrye-kafka
mp.messaging.outgoing.create-physical-card.topic=alt.create-physical-card
mp.messaging.outgoing.cancel-cards-by-account.connector=smallrye-kafka
mp.messaging.outgoing.cancel-cards-by-account.topic=alt.cancel-cards-by-account

mp.messaging.incoming.invalidate-account-cache.connector=smallrye-kafka
mp.messaging.incoming.invalidate-account-cache.topic=alt.invalidate-account-cache
mp.messaging.incoming.invalidate-account-cache.group.id=account-service

# Redis - cache getAccount (15 min). Local: localhost:6379; Docker: redis:6379 (docker profile)
quarkus.redis.hosts=redis://localhost:6379
quarkus.cache.redis.get-account.expire-after-write=15M
quarkus.cache.redis.get-account.key-type=java.lang.String
quarkus.cache.redis.get-account.value-type=com.alt.account.service.GetAccountCacheEntry
